{"_id":"584472ebc20064020bbd831a","title":"Install Eucalyptus (CentOS)","author":"Earl Gay","category":"Installation","product":"Eucalyptus","description":"Deploy the Eucalyptus application within CentOS","steps":"Preparation,,,noLauncher|||1,,,Create a DNS entry within your environment for eucalyptus (e.g. eucalyptus.acme.org) and point it to the static IP address obtained.;;;OS Download,,,https://centos.org/download/|||1,,,Navigate to the CentOS website and download the DVD ISO.;;;CentOS VM Deployment,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Navigate to vCenter and log in with an account that has permission to deploy virtual machines.|||2,,,Deploy the Virtual Machine in the location of choice with at least 1 vCPU and 2GB of RAM.|||3,,,Attach the CentOS 7 ISO DVD to the Virtual Machine and boot.|||4,,,Configure according to organizational requirements; however, default settings are acceptable. Recommended: Select default disk for Installation Destination, select Minimal Install for Software Selection, enable Ethernet and configure a static IP and hostname for Network and Hostname, and then select Begin Installation.|||5,,,While installation is occurring, set the root account password and create a new user account under Configuration. Select \"Advanced\" when creating the user account. Ensure the new user account created is a member of the \"wheel\" group. Select \"Finish configuration\" once accounts are configured accordingly.|||6,,,Select \"Reboot\" after the installation process is finished.;;;CentOS VM Configuration,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Log in to virtual machine with the user account created either through the vSphere Console or through SSH.|||2,,,Install git through yum: sudo yum -y install git|||3,,,Install wget through yum: sudo yum -y install wget|||4,,,Install the repo through yum: sudo yum -y install epel-release|||5,,,Turn off and disable the local firewall: sudo systemctl disable firewalld && sudo systemctl stop firewalld|||6,,,Execute: sudo systemctl mask ctrl-alt-del.target && sudo systemctl daemon-reload;;;Install NodeJS,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Download with wget: wget https://nodejs.org/dist/v6.9.1/node-v6.9.1-linux-x64.tar.xz|||2,,,xtract using tar: tar xfv tar xfv node-v6.9.1-linux-x64.tar.xz|||3,,,Execute: mv node-v6.9.1-linux-x64 node|||4,,,Within the node folder, create an 'etc' directory: mkdir node/etc|||5,,,Add to path by executing: echo 'prefix=/usr/local' > node/etc/npmrc|||6,,,Move the folder to opt: sudo mv node /opt/|||7,,,Change ownership: sudo chown -R root: /opt/node|||8,,,Create symbolic links: sudo ln -s /opt/node/bin/node /usr/local/bin/node && sudo ln -s /opt/node/bin/npm /usr/local/bin/npm|||9,,,Open visudo and add \":/usr/local/bin\" to the end of the \"Defaults secure_path\" line: sudo visudo|||10,,,Check the node version and confirm it returns v6.9.1: node --version;;;Install MongoDB,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,In-Progress;;;Install Eucalyptus,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Clone using git: git clone https://github.com/eeg3/Eucalyptus.git|||2,,,Execute: mkdir ssl && cd ssl|||3,,,Use OpenSSL to generate the SSL certificate and fill out wizard: openssl req -x509 -newkey rsa:2048 -keyout server.key -out server.crt -days 365|||4,,,Within the SSL folder, execute: openssl rsa -in server.key -out newserver.key && mv newserver.key server.key|||5,,,Switch to the Eucalyptus folder: cd ~/Eucalyptus/|||6,,,Confirm Eucalyptus starts properly and shows listening and connected to database: node server.js|||7,,,If Eucalyptus is still running, end it with Ctrl+C.;;;Setup PM2,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Using npm install PM2 globally: /opt/node/bin/npm install pm2@latest -g|||2,,,Switch to the Eucalyptus folder: cd ~/Eucalyptus/|||3,,,Use PM2 to start Eucalyptus: pm2 start server.js|||4,,,Check status is online with PM2: pm2 status;;;Setup Nginx as Reverse Proxy,,,noLauncher|||1,,,In-Progress;;;Put Eucalyptus in Configuration Mode,,,https://vcsa01.eeg3.lab/vsphere-client/|||1,,,Open config/base.js inside the Eucalyptus directory, and change \"requireApproval\" to false.|||2,,,Execute: pm2 restart server;;;Create Initial Accounts,,,https://eucalyptus:8443/signup|||1,,,Create the initial account that can then be used to approve all others. On the Signup page, enter your email address and password.","__v":0,"links":{"self":"http://eucalyptus.io/api/flightplan/584472ebc20064020bbd831a"}}
